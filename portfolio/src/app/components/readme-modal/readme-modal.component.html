@if (isOpen) {
<div
  class="modal-overlay"
  [style.visibility]="visible ? 'visible' : 'hidden'"
  (click)="onOverlayClick($event)"
  (keydown)="onKeyDown($event)"
>
  <div class="modal-content" (click)="$event.stopPropagation()" (keydown)="onKeyDown($event)">
    <!-- Modal Header -->
    <div class="modal-header">
      <h2>{{ projectName }} - README</h2>
      <div class="modal-controls">
        <div class="zoom-controls">
          <!-- Theme toggle (light/dark) placed to the left of zoom controls -->
          <button class="theme-toggle" (click)="toggleTheme()" [attr.title]="isLightMode ? 'Modo Escuro' : 'Modo Claro'">{{ isLightMode ? 'ðŸ”†' : 'ðŸŒ™' }}</button>
          <button class="zoom-btn" (click)="decreaseZoom()" title="Diminuir zoom">-</button>
          <span class="zoom-level">{{ markdownZoom * 100 | number : '1.0-0' }}%</span>
          <button class="zoom-btn" (click)="increaseZoom()" title="Aumentar zoom">+</button>
          <button class="zoom-btn reset-zoom" (click)="resetZoom()" title="Resetar zoom">â†º</button>
        </div>
        <button class="close-btn" (click)="closeModal()">&times;</button>
      </div>
    </div>

    <!-- Modal Body -->
    <div class="modal-body" (wheel)="onMouseWheel($event)" (keydown)="onKeyDown($event)">
      @if (loadingReadme) {
      <div class="loading-readme">
        <div class="spinner"></div>
        <p>Carregando README...</p>
      </div>
      } @else if (readmeContent) {
      <div
        class="markdown-content"
        [innerHTML]="sanitizer.bypassSecurityTrustHtml(readmeContent)"
        [style.--md-scale]="markdownZoom"
        [ngStyle]="isFirefox ? {'width': '100%'} : {'zoom': markdownZoom}">
      </div>
      } @else {
      <div class="no-readme">
        <p>README nÃ£o encontrado para este projeto.</p>
      </div>
      }
    </div>
  </div>
</div>
}
