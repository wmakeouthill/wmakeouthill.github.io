# ğŸ¯ Diretrizes de Desenvolvimento - Sistema Snackbar

## Arquitetura de DocumentaÃ§Ã£o

Este documento serve como **ponto de entrada** para os padrÃµes de desenvolvimento do projeto.
As regras especÃ­ficas estÃ£o organizadas em arquivos dedicados:

| Arquivo | Escopo | DescriÃ§Ã£o |
|---------|--------|-----------|
| `.cursorrules` | Geral | PrincÃ­pios fundamentais e visÃ£o geral (este arquivo) |
| `.cursorrules-frontend` | Angular 17+ | Regras especÃ­ficas para desenvolvimento frontend |
| `.cursorrules-backend` | Java 17 / Spring | Regras especÃ­ficas para desenvolvimento backend |

---

## âš ï¸ PRINCÃPIOS FUNDAMENTAIS INEGOCIÃVEIS

### 1. Clean Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      INFRASTRUCTURE                          â”‚
â”‚         Frameworks, UI, DB, APIs Externas                    â”‚
â”‚                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚                   APPLICATION                      â”‚    â”‚
â”‚    â”‚            Use Cases, DTOs, Ports                  â”‚    â”‚
â”‚    â”‚                                                    â”‚    â”‚
â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚    â”‚    â”‚              DOMAIN                    â”‚      â”‚    â”‚
â”‚    â”‚    â”‚    Entidades, Value Objects,           â”‚      â”‚    â”‚
â”‚    â”‚    â”‚    Regras de NegÃ³cio                   â”‚      â”‚    â”‚
â”‚    â”‚    â”‚    âŒ ZERO dependÃªncias externas       â”‚      â”‚    â”‚
â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚    â”‚                                                    â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Regra de DependÃªncia:** `Infrastructure â†’ Application â†’ Domain`

âŒ **NUNCA** inverta essa ordem!

---

### 2. SOLID

| PrincÃ­pio | AplicaÃ§Ã£o | Regra |
|-----------|-----------|-------|
| **S**ingle Responsibility | Classes/Componentes | Uma classe = uma responsabilidade |
| **O**pen/Closed | Extensibilidade | Aberto para extensÃ£o, fechado para modificaÃ§Ã£o |
| **L**iskov Substitution | Hierarquias | Subtipos devem ser substituÃ­veis |
| **I**nterface Segregation | Interfaces | Interfaces pequenas e especÃ­ficas |
| **D**ependency Inversion | Acoplamento | Dependa de abstraÃ§Ãµes, nÃ£o de implementaÃ§Ãµes |

---

### 3. DRY (Don't Repeat Yourself)

```
âœ… SEMPRE verificar antes de criar:
   Backend  â†’ kernel-compartilhado/
   Frontend â†’ src/app/utils/ e composables/

âœ… SEMPRE usar singletons de mappers:
   Backend  â†’ MapperUtils.getInstance()
   Frontend â†’ Composables reutilizÃ¡veis

âŒ NUNCA duplicar cÃ³digo existente
âŒ NUNCA criar utilitÃ¡rios sem verificar se jÃ¡ existem
```

---

### 4. Clean Code

#### Limites de Tamanho

| Escopo | Limite Recomendado | Limite MÃ¡ximo |
|--------|-------------------|---------------|
| Classe/Componente | 150 linhas | 300 linhas |
| MÃ©todo/FunÃ§Ã£o | 15 linhas | 20 linhas |
| ParÃ¢metros | 3 parÃ¢metros | 5 parÃ¢metros |

#### Nomenclatura

| Tipo | PadrÃ£o | Exemplo |
|------|--------|---------|
| Classes | PascalCase | `ProdutoService`, `CriarPedidoUseCase` |
| MÃ©todos/FunÃ§Ãµes | camelCase (verbos) | `buscarProduto()`, `salvarCliente()` |
| VariÃ¡veis | camelCase | `produtoSelecionado`, `listaItens` |
| Constantes | UPPER_SNAKE_CASE | `MAX_UPLOAD_SIZE`, `API_URL` |
| Arquivos Angular | kebab-case | `produto-lista.component.ts` |

#### ProibiÃ§Ãµes Absolutas

```
âŒ AbreviaÃ§Ãµes: prod, cat, svc, usr
âŒ Nomes genÃ©ricos: data, info, util, helper, manager
âŒ CÃ³digo comentado no repositÃ³rio
âŒ Catch vazio ou genÃ©rico demais
âŒ VariÃ¡veis com nomes de uma letra (exceto loops simples)
```

---

## ğŸ› ï¸ STACK TECNOLÃ“GICA

### Frontend

| Tecnologia | VersÃ£o | Obrigatoriedade |
|------------|--------|-----------------|
| Angular | 17.3.0+ | Standalone Components |
| TypeScript | 5.4.2+ | Strict Mode |
| RxJS | 7.8.0+ | Uso reduzido (preferir Signals) |

**Sintaxe Moderna OBRIGATÃ“RIA:**

```typescript
// InjeÃ§Ã£o e Estado
inject()      // DI
signal()      // Estado reativo
computed()    // Valores derivados
input()       // Props
output()      // Eventos
effect()      // Efeitos colaterais

// Templates
@if, @else, @for, @switch, @defer
```

ğŸ“– **Detalhes completos:** `.cursorrules-frontend`

### Backend

| Tecnologia | VersÃ£o | ObservaÃ§Ã£o |
|------------|--------|------------|
| Java | 17 | VersÃ£o exata |
| Spring Boot | 3.2.3+ | WebFlux ou MVC |
| Liquibase | 4.25.0+ | MigraÃ§Ãµes |
| Maven | 3.8+ | Build |
| MySQL | 8.0+ | Banco de dados |
| Lombok | Latest | Boilerplate |

**PadrÃµes OBRIGATÃ“RIOS:**

```java
// Lombok
@RequiredArgsConstructor  // SEMPRE para injeÃ§Ã£o

// Mappers
MapperUtils.getInstance()  // SEMPRE singleton

// Java 17
record, sealed, pattern matching, text blocks
```

ğŸ“– **Detalhes completos:** `.cursorrules-backend`

---

## ğŸ“ ESTRUTURA DO PROJETO

### VisÃ£o Geral

```
snackbar/
â”œâ”€â”€ frontend/                    # Angular 17+ SPA
â”‚   â””â”€â”€ src/app/
â”‚       â”œâ”€â”€ components/          # Componentes de feature
â”‚       â”‚   â””â”€â”€ {feature}/
â”‚       â”‚       â”œâ”€â”€ composables/ # LÃ³gica reutilizÃ¡vel
â”‚       â”‚       â””â”€â”€ components/  # Sub-componentes
â”‚       â”œâ”€â”€ services/            # ServiÃ§os de aplicaÃ§Ã£o
â”‚       â”œâ”€â”€ models/              # Interfaces e tipos
â”‚       â””â”€â”€ utils/               # UtilitÃ¡rios compartilhados
â”‚
â”œâ”€â”€ kernel-compartilhado/        # CÃ³digo compartilhado Java
â”‚   â””â”€â”€ com.snackbar.kernel/
â”‚       â”œâ”€â”€ domain/
â”‚       â”œâ”€â”€ application/
â”‚       â””â”€â”€ infrastructure/
â”‚
â””â”€â”€ {modulo}/                    # MÃ³dulos de negÃ³cio Java
    â””â”€â”€ com.snackbar.{modulo}/
        â”œâ”€â”€ domain/              # Entidades, VOs, Regras
        â”‚   â”œâ”€â”€ entities/
        â”‚   â”œâ”€â”€ valueobjects/
        â”‚   â”œâ”€â”€ services/
        â”‚   â””â”€â”€ exceptions/
        â”œâ”€â”€ application/         # Casos de uso, DTOs
        â”‚   â”œâ”€â”€ usecases/
        â”‚   â”œâ”€â”€ dtos/
        â”‚   â””â”€â”€ ports/
        â””â”€â”€ infrastructure/      # Adaptadores, Config
            â”œâ”€â”€ persistence/
            â”œâ”€â”€ web/
            â”œâ”€â”€ mappers/
            â””â”€â”€ config/
```

### MÃ³dulos do Sistema

| MÃ³dulo | Responsabilidade |
|--------|------------------|
| `kernel-compartilhado` | Classes base, mappers, utilitÃ¡rios |
| `autenticacao` | AutenticaÃ§Ã£o e autorizaÃ§Ã£o |
| `gestao-cardapio` | Produtos e categorias |
| `gestao-clientes` | Cadastro de clientes |
| `gestao-pedidos` | Ciclo de vida dos pedidos |
| `impressao-cupom-fiscal` | ImpressÃ£o de cupons |
| `sistema-orquestrador` | OrquestraÃ§Ã£o de serviÃ§os |

---

## âœ… CHECKLIST UNIVERSAL

### Antes de Iniciar uma Feature

- [ ] Li e entendi a arquitetura do mÃ³dulo
- [ ] Verifiquei se existe cÃ³digo similar que pode ser reutilizado
- [ ] Defini as camadas onde o cÃ³digo serÃ¡ criado
- [ ] Planejei a divisÃ£o de responsabilidades

### Antes de Commitar

#### Arquitetura

- [ ] Clean Architecture respeitada (dependÃªncias corretas)
- [ ] Domain sem dependÃªncias de frameworks
- [ ] Responsabilidade Ãºnica por classe/componente

#### Qualidade de CÃ³digo

- [ ] Arquivos com menos de 300 linhas
- [ ] FunÃ§Ãµes/mÃ©todos com menos de 20 linhas
- [ ] Nomes descritivos e autoexplicativos
- [ ] Sem cÃ³digo duplicado

#### Frontend (Angular)

- [ ] Usando `inject()`, nÃ£o constructor injection
- [ ] Usando `signal()`, `computed()`, `input()`, `output()`
- [ ] Usando `@if`, `@for`, `@switch` nos templates
- [ ] Standalone components apenas
- [ ] ChangeDetection.OnPush habilitado

#### Backend (Java)

- [ ] Usando `@RequiredArgsConstructor`
- [ ] Usando `MapperUtils.getInstance()`
- [ ] Entidades ricas (com comportamento)
- [ ] Value Objects imutÃ¡veis
- [ ] ExceÃ§Ãµes especÃ­ficas e tratadas

#### Testes

- [ ] Testes unitÃ¡rios para lÃ³gica de negÃ³cio
- [ ] Testes de casos de erro
- [ ] PadrÃ£o AAA (Arrange, Act, Assert)

---

## ğŸš« ANTI-PATTERNS UNIVERSAIS

### CÃ³digo

1. âŒ **God Classes** - Classes fazendo muitas coisas
2. âŒ **Entidades AnÃªmicas** - Apenas getters/setters, sem comportamento
3. âŒ **CÃ³digo Duplicado** - Violar DRY
4. âŒ **Nomes GenÃ©ricos** - `data`, `info`, `util`, `helper`
5. âŒ **AbreviaÃ§Ãµes** - `prod`, `cat`, `svc`, `usr`
6. âŒ **Magic Numbers/Strings** - Valores hardcoded sem constantes

### Arquitetura

7. âŒ **DependÃªncias Invertidas** - Domain dependendo de Infrastructure
8. âŒ **LÃ³gica no Controller** - Regras de negÃ³cio na camada web
9. âŒ **Framework no Domain** - JPA, Spring annotations no domÃ­nio
10. âŒ **Use Cases Gigantes** - Casos de uso fazendo muitas coisas

### Frontend EspecÃ­fico

11. âŒ **Sintaxe Antiga** - `*ngIf`, `*ngFor`, `@Input()`, `@Output()`
12. âŒ **Constructor Injection** - Ao invÃ©s de `inject()`
13. âŒ **BehaviorSubject para Estado** - Ao invÃ©s de Signals
14. âŒ **NgModules** - Ao invÃ©s de Standalone Components

### Backend EspecÃ­fico

15. âŒ **Construtor Manual** - Ao invÃ©s de `@RequiredArgsConstructor`
16. âŒ **`new MapperUtils()`** - Ao invÃ©s de `.getInstance()`
17. âŒ **Retornar `null`** - Ao invÃ©s de `Optional`
18. âŒ **Catch Vazio** - Engolir exceÃ§Ãµes

---

## ğŸ“š REFERÃŠNCIA RÃPIDA

### Criar Novo Componente Angular

```typescript
// âœ… Template correto
@Component({
  selector: 'app-exemplo',
  standalone: true,
  imports: [CommonModule, /* apenas o necessÃ¡rio */],
  templateUrl: './exemplo.component.html',
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class ExemploComponent {
  // 1. InjeÃ§Ãµes
  private readonly service = inject(ExemploService);
  
  // 2. Inputs/Outputs
  readonly item = input.required<Item>();
  readonly onSalvar = output<Item>();
  
  // 3. State
  readonly carregando = signal(false);
  
  // 4. Computeds
  readonly itemValido = computed(() => this.validar(this.item()));
  
  // 5. Methods
  salvar(): void { }
}
```

### Criar Novo Use Case Java

```java
// âœ… Template correto
@Service
@RequiredArgsConstructor
public class CriarExemploUseCase {
    
    private final ExemploRepositoryPort repository;
    private final ValidadorService validador;
    private final MapperUtils mapper = MapperUtils.getInstance();
    
    @Transactional
    public ExemploDTO executar(CriarExemploRequest request) {
        validarRequest(request);
        
        Exemplo exemplo = Exemplo.criar(request.nome());
        Exemplo salvo = repository.salvar(exemplo);
        
        return ExemploDTO.from(salvo);
    }
    
    private void validarRequest(CriarExemploRequest request) {
        // ValidaÃ§Ã£o de entrada
    }
}
```

---

## ğŸ”— LINKS PARA DOCUMENTAÃ‡ÃƒO DETALHADA

| Documento | ConteÃºdo |
|-----------|----------|
| `.cursorrules-frontend` | Regras Angular, Signals, Composables, Testes Frontend |
| `.cursorrules-backend` | Regras Java, Clean Architecture, DDD, Testes Backend |
| `GUIA_IMPLEMENTACAO_PRATICA.md` | Guia prÃ¡tico de implementaÃ§Ã£o |

---

**ğŸš¨ ESTAS DIRETRIZES SÃƒO INEGOCIÃVEIS**

Sempre siga todas as regras antes de implementar qualquer funcionalidade.
Em caso de dÃºvida, consulte os arquivos especÃ­ficos de frontend ou backend.
